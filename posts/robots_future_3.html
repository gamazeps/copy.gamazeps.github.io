<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>gama's ramblings - Designing Robots Futures - Part 3</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <link rel="stylesheet" href="../css/code.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">gama's ramblings</a>
            </div>
            <div id="navigation">
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <h1>Designing Robots Futures - Part 3</h1>
            <div class="info">
    Posted on January 17, 2016
    
        by Felix Raimundo
    
</div>

<p>The next series of posts on Futures will be my personal notes while implementing, they may not reflect the final implementation. So if you want to see a post detailing the architecture, these are not the post you will be looking for, nevertheless you may find this read interesting to see how I came to design them the way they are.</p>
<h1 id="looking-at-what-is-done-elsewhere.">Looking at what is done elsewhere.</h1>
<p>I spent some time looking at the implementation of carllerche’s eventual future this weekend.</p>
<p>This has solved some of my issues, first most <code>Async</code> operation consume the Future (takes a <code>self</code>), so this solves the issue mentionned on the last post.</p>
<p>This however raises another issue: this means that all calls create a new future, thus the complete that we keep is not relevant if many closures are called on the future. Thus we can’t keep the future outside of the actor, and the Future is dropped at the end of the <code>receive</code> call.</p>
<p>Eventual future thus seem not to work very well for our case.</p>
<h1 id="lets-implement-our-own.">Let’s implement our own.</h1>
<p>Since we want our futures to be closely integrated with the actor system, it seems simpler to just go and implement futures instead of depending on the ones in eventual.</p>
<p>It does sound like it wil end up in reinventing some form of wheel, but the other option is to hack / patch around eventual’s futures which were not planned to be used in our use case.</p>
<h2 id="what-we-want.">What we want.</h2>
<p>As before we want actors to interract with futures as if they were actors and we want them to be asynchronous (i register closures that wil do something on the result).</p>
<p>A nice to have feature would be to have timeouts and notification in the case of failures.</p>
<h2 id="issue-ahead.">Issue ahead.</h2>
<p>We want to store the closures in the Future, but these are most likely not <code>'static</code> as we can see in this <a href="https://github.com/gamazeps/RobotS/commit/19b1efda7da7b97479d6de85baaf2958c1bae3ce#diff-e0ac5767a085357f3382796f2aacebd3R59">code snippet</a>.</p>

        </div>

				<div id="disqus_thread"></div>
				<script>
				/**
				*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
				*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
				/*
				var disqus_config = function () {
				this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
				this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
				};
				*/
				(function() { // DON'T EDIT BELOW THIS LINE
				var d = document, s = d.createElement('script');
				s.src = 'https://gamazepsgithubio.disqus.com/embed.js';
				s.setAttribute('data-timestamp', +new Date());
				(d.head || d.body).appendChild(s);
				})();
				</script>
				<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>

    </body>
</html>
