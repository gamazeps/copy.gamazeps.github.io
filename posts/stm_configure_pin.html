<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>gama's ramblings - Configuring a pin</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <link rel="stylesheet" href="../css/code.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">gama's ramblings</a>
            </div>
            <div id="navigation">
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <h1>Configuring a pin</h1>
            <div class="info">
    Posted on February 21, 2016
    
        by Felix Raimundo
    
</div>

<h1 id="what-does-configuring-a-pin-means">What does configuring a pin means ?</h1>
<p>In the last article we saw this line:</p>
<div class="sourceCode"><pre class="sourceCode c"><code class="sourceCode c"><span class="co">// Configures GPIOD pin 14 as output pushpull</span>
palSetPadMode(GPIOD, <span class="dv">14</span>, PAL_MODE_OUTPUT_PUSHPULL);</code></pre></div>
<p>It was explained by saying that we were “configuring” the pin, but what does that mean ?</p>
<p>Most microprocessors have a lot of cool hardware inside them:</p>
<ul>
<li>Timers</li>
<li><a href="%7Bfilename%7D/blog/stm_pwm_driver.md">PWM</a></li>
<li>ADC</li>
<li>DAC</li>
<li>I2C</li>
<li>SPI</li>
<li>UART</li>
<li>And so on…</li>
</ul>
<p>Each pin has access to a few of these hardware functions and thus we have to say which one it is going to use.</p>
<p>The reason why a lot of hardware function are available to each pin is because this way the microcontroller is much more multi purpose, which allows to use it for many application cases and thus makes it cheaper to build than a microcontroller for each application.</p>
<p>Chosing the function you want is done by writting the appropriate configuration in the microcontroller’s register. We could do this by hand or enjoy the use of an abstraction, and ChibiOS gives us two !</p>
<p>The one that we already saw allows us to configure the pin after the initialization of the board, but this is not really the recommanded way.</p>
<p>Anyway here is another example of config done this way (repetition is good for learning ;) )</p>
<div class="sourceCode"><pre class="sourceCode c"><code class="sourceCode c">palSetPadMode(GPIOB, <span class="dv">4</span>, PAL_MODE_ALTERNATE(<span class="dv">2</span>));</code></pre></div>
<p>Which configures the pin B4 to its Alternate Mode 2 (here a PWM).</p>
<p>The second method is to describe your pinout (what your pins do) in your <code>board.h</code> file, but we will see that later.</p>
<h1 id="what-are-all-the-cool-hardware-mentionned-above">What are all the cool hardware mentionned above ?</h1>
<p>Well they will be the subject of following articles that will be added here as they are written.</p>
<p>The basic idea is that your pins can do more than just be set high and low with <code>palSetPad</code> and <code>palClearPad</code>.</p>
<p>A pin that only ‘knows’ HIGH and LOW is called a GPIO, this means General Purpose Input Output, since it is general it doesn’t do much, it can be an output or an input and that’s about it.</p>

        </div>

				<div id="disqus_thread"></div>
				<script>
				/**
				*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
				*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
				/*
				var disqus_config = function () {
				this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
				this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
				};
				*/
				(function() { // DON'T EDIT BELOW THIS LINE
				var d = document, s = d.createElement('script');
				s.src = 'https://gamazepsgithubio.disqus.com/embed.js';
				s.setAttribute('data-timestamp', +new Date());
				(d.head || d.body).appendChild(s);
				})();
				</script>
				<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>

    </body>
</html>
